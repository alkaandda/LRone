using namespace std;
#include <cstdio>
#include <windows.h>
#include <iostream>

// используем параметр inline для ускорения выполнения функции путем задачи точки вызова, в таком случае сама функция весит больше, чем без inline
inline unsigned dq_sum(unsigned x) // unsigned - x может быть только положительным числом, указываем явно на то, что x не может иметь знак минус
{
    static const unsigned char DSQ[10] = // в массиве 10 элементов, счет начинается с нуля
    { 0, 1, 4, 9, 16, 25, 36, 49, 64, 81 }; // задаем неизменяемый массив - квадрат каждого числа от 0 до 9 
    unsigned sum = 0; // задаем переменную sum, которая изначально развна нулю

    do {
        // получаем сумму квадратов цифр числа X
        sum += DSQ[x % 10]; // вычисляем остаток от деления 10 элементов массива
        cout << sum << "  Выводим сумму" << endl; // все арифметические расчеты программы, программа считает с права на лево (Еврей)
    } while (x /= 10); // пока X при делении не станет равен 10
    return sum; // затем возвращаем значение суммы
}

bool is_happy(unsigned x) // создаем логическую фукнцию is_happy с только положительным возможным числом X
{
    if (x < 5) return x == 1; // если x меньше 5, возвращаем каждое число равняющееся еденице
    return is_happy(dq_sum(x)); // возвращаем обе функции и все счастливые числа
}

void Exit () {
    exit(2);
}



#define MAX 101 // задаем конечный диапазон определения счастливых чисел от 1 до MAX = 101, так как, 100 является счастливым числом

int main() // основная программная функция
{
    // задаем кодировку консоли для русской локализации на ввод и вывод
    setlocale(LC_ALL, "Rus");
    SetConsoleCP(1251);
    SetConsoleOutputCP(1251);

    for (unsigned x = 0; x != MAX; x++) // задаем цикл, при котором пока X не достигнет значения переменной MAX, цикл будет выполняться
        if (is_happy(x)) // в случае если X счастливое число выводим это число и информацию о том, что оно счастливое
            cout << x << " счастливое число" << endl << endl; // выводим X, так же вместо cout можем использовать функцию printf(x)
        else {
            cout << x << " НЕ счастливое" << endl;
        }

    cout << "Введите 1 для завершения программы" << endl;
    int end = 0;
    if (end == 1) {
        Exit;
        }
    cin >> end;

    return 0; // успешно завершаем программу
}
